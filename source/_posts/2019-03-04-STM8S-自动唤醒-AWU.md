---
title: STM8S 自动唤醒 AWU
date: 2019-03-04 08:45:30
tags:
    - 硬件拾忆
    - STM8
---

---

### 一、简介



AWU 是用来当 MCU 进入低功耗的 Active Halt 模式时提供一个内部的唤醒时间基准。该时间基准的时钟是由内部的低速 RC 振荡器时钟（LSI）或通过预分频的 HSE 晶振时钟来提供的。

<!--more-->

**LSI 时钟测量**



在使用 LSI 低速内部时钟时，为了确保最好的精度，它的频率可以通过 TIM3 的输入捕获 1 来测定。



![Image.png](https://i.loli.net/2019/03/04/5c7c75c9bab66.png)



注意：LS 低速时钟源的选择是通过编程 CKAWUSEL 选项位来实现的。



---

### 二、AWU 功能描述



#### 1、AUW 操作



为了使用 AWU 功能，按顺序执行如下步骤：



![Image.png](https://i.loli.net/2019/03/04/5c7c75eb5d4df.png)



**空闲模式**



如果不使用 AWU，必须载入‘0000’值到 AWU_TBR 的 AWUTB[3:0] 来降低功耗。



#### 2、时基选择



![Image.png](https://i.loli.net/2019/03/04/5c7c760388799.png)



#### 3、LSI 低速内部时钟频率检测



在经过出厂校验后，在全温度范围内低速内部 RC（LSI）振荡器的频率离散性是 128kHz±12.5%。为了获得精确的 AWU 时间间隔或蜂鸣器输出，必须精确测量 LSI 频率。



![Image.png](https://i.loli.net/2019/03/04/5c7c761d6ced8.png)



---

### 三、AWU寄存器



控制/状态寄存器     AWU_CSR

异步预分频寄存器   AWU_APR

时基选择寄存器      AWU_TBR