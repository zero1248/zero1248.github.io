<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="硬件拾忆,STM32,">










<meta name="description" content="一、时钟源1、物理时钟源看到好多地方都说 STM32F1 有五个时钟源 HSE、HSI、LSI、LSE 和 PLL，但是我觉得 PLL 严格来讲不算一个时钟源，它是在基本的物理时钟上倍频得到的，因此我把 HSE、HSI、LSI、LSE 归结为 STM32F1 的四个基本物理时钟源。">
<meta name="keywords" content="硬件拾忆,STM32">
<meta property="og:type" content="article">
<meta property="og:title" content="STM32 时钟树总结">
<meta property="og:url" content="http://yoursite.com/blog/2019/03/04/STM32-时钟树总结/index.html">
<meta property="og:site_name" content="Isaac前进4">
<meta property="og:description" content="一、时钟源1、物理时钟源看到好多地方都说 STM32F1 有五个时钟源 HSE、HSI、LSI、LSE 和 PLL，但是我觉得 PLL 严格来讲不算一个时钟源，它是在基本的物理时钟上倍频得到的，因此我把 HSE、HSI、LSI、LSE 归结为 STM32F1 的四个基本物理时钟源。">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://i.loli.net/2019/03/04/5c7c85c0784c9.png">
<meta property="og:image" content="https://i.loli.net/2019/03/04/5c7c842945450.png">
<meta property="og:updated_time" content="2022-03-05T16:47:58.044Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="STM32 时钟树总结">
<meta name="twitter:description" content="一、时钟源1、物理时钟源看到好多地方都说 STM32F1 有五个时钟源 HSE、HSI、LSI、LSE 和 PLL，但是我觉得 PLL 严格来讲不算一个时钟源，它是在基本的物理时钟上倍频得到的，因此我把 HSE、HSI、LSI、LSE 归结为 STM32F1 的四个基本物理时钟源。">
<meta name="twitter:image" content="https://i.loli.net/2019/03/04/5c7c85c0784c9.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/blog/2019/03/04/STM32-时钟树总结/">





  <title>STM32 时钟树总结 | Isaac前进4</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Isaac前进4</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">人生很长，何必惊慌</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/blog/2019/03/04/STM32-时钟树总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Isaac">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Isaac前进4">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">STM32 时钟树总结</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-04T09:48:27+08:00">
                2019-03-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <hr>
<h3 id="一、时钟源"><a href="#一、时钟源" class="headerlink" title="一、时钟源"></a>一、时钟源</h3><h4 id="1、物理时钟源"><a href="#1、物理时钟源" class="headerlink" title="1、物理时钟源"></a>1、物理时钟源</h4><p>看到好多地方都说 STM32F1 有五个时钟源 HSE、HSI、LSI、LSE 和 PLL，但是我觉得 PLL 严格来讲不算一个时钟源，它是在基本的物理时钟上倍频得到的，因此我把 HSE、HSI、LSI、LSE 归结为 STM32F1 的四个基本物理时钟源。</p>
<a id="more"></a>
<p><img src="https://i.loli.net/2019/03/04/5c7c85c0784c9.png" alt="Image.png"></p>
<p>STM32F1xx 有 4 个物理时钟源：</p>
<ul>
<li><p>HSE（High Speed External clock signal）4-16MHz</p>
</li>
<li><p>HSI（High Speed Internal clock signal） 8MHz</p>
</li>
<li><p>LSI（Low Speed Internal clock signal） 40kHz            驱动独立看门狗 IWDG 和 AWU</p>
</li>
<li><p>LSE（Low Speed External clock signal）32.768kHz     驱动RTC</p>
</li>
</ul>
<p>其中 HSE 和 HSI 可经 PLL 倍频得到 PLL 高频时钟源（最大 72M）。</p>
<h5 id="（1）高速外部时钟信号（HSE）"><a href="#（1）高速外部时钟信号（HSE）" class="headerlink" title="（1）高速外部时钟信号（HSE）"></a>（1）高速外部时钟信号（HSE）</h5><p>​     由以下两种时钟源产生：</p>
<p>·    HSE 外部晶体/陶瓷谐振器</p>
<p>·    HSE 用户外部时钟</p>
<p><img src="https://i.loli.net/2019/03/04/5c7c842945450.png" alt="Image.png"></p>
<p><strong>外部时钟源（HSE旁路）</strong></p>
<p>在这个模式里，必须提供外部时钟。它的频率最高可达 25MHz。用户可通过设置在控制寄存器中的 HSEBYP 和 HSEON 位来选择这一模式。外部时钟信号（50% 占空比的方波、正弦波或三角波）必须连到 OSC_IN 引脚，同时保证 OSC_OUT 引脚悬空，如上图。</p>
<p><strong>外部晶体/陶瓷谐振器（HSE晶体）</strong></p>
<p>4~16MHz 外部振荡器可为系统提供更为精确的主时钟。相关的硬件配置参考上图（关于晶体/陶瓷谐振器的原理，或者遇到晶振不起振的问题，可以参考下皮尔斯振荡器）。为了减少时钟输出的失真和缩短启动稳定时间，晶体/陶瓷谐振器和负载电容器必须尽可能地靠近振荡器引脚。负载电容值必须根据所选择的振荡器来选择。时钟控制寄存器 RCC_CR 中的 HSERDY 位用来指示高速外部振荡器是否稳定。在启动时，知道这一位被硬件置“1”,时钟才被释放。如果在时钟中断寄存器 RCCC_CIR 中允许产生中断，将会产生相应中断。HSE 晶体可以通过设置时钟控制寄存器里 RCC_CR 中的 HSEON 位被启动和关闭。</p>
<h5 id="（2）高速内部时钟信号（HSI）"><a href="#（2）高速内部时钟信号（HSI）" class="headerlink" title="（2）高速内部时钟信号（HSI）"></a>（2）高速内部时钟信号（HSI）</h5><p>HSI 时钟信号由内部 8MHz 的 RC 振荡器产生，可直接作为系统时钟或在 2 分频后作为 PLL 输入（此时最大 64M）。HSI RC 振荡器能在不需要任何外部器件的条件下提供系统时钟。它的启动时间比 HSE 晶体振荡器短。然而，即使在校准之后它的时钟频率精度仍较差。</p>
<p>​     </p>
<p><strong>HSI 校准：</strong></p>
<p>制造工艺决定了不同芯片的 RC 振荡器频率会不同，这就是为什么每个芯片的 HSI 时钟频率在出厂前已经被 ST 校准到 1%（25℃）的原因。系统复位时，工厂校准值被装在到时钟控制器的 HSICAL[7:0] 位。如果用户的应用基于不同的电压或环境温度，这将会影响 RC 振荡器的精度。可以通过时钟控制寄存器里的 HSITRIM[4:0] 位来调整 HSI 频率。</p>
<p>时钟控制寄存器中的 HSIRDY 位用来指示 HSI RC 振荡器是否稳定。在时钟启动过程中，知道这一位被硬件置“1”,HSI RC 输出时钟才被释放。HSI RC 可由时钟控制寄存器中的 HSION 位来启动和关闭。</p>
<p>如果 HSE 晶体振荡器失效，HSI 时钟会被作为备用时钟源。</p>
<p>​     </p>
<h5 id="（3）低速外部时钟信号（LSE）"><a href="#（3）低速外部时钟信号（LSE）" class="headerlink" title="（3）低速外部时钟信号（LSE）"></a>（3）低速外部时钟信号（LSE）</h5><p>LSE 晶体是一个 32.768kHz 的低速外部晶体或陶瓷谐振器。它为实时时钟或其他定时功能提供一个低功耗且精确的时钟源。</p>
<p>LSE 晶体通过在备份域控制寄存器（RCC_BDCR）里的 LSEON 位启动和关闭。</p>
<p>在备份域控制寄存器（RCC_BDCR ）里的 LSERDY 指示 LSE 晶体振荡是否稳定。在启动阶段，知道这个位被硬件置 1 后，LSE 时钟信号才被释放出来。如果在时钟中断寄存器里被允许，可产生中断申请。</p>
<p><strong>外部时钟源（LSE旁路）</strong></p>
<p>在这个模式里必须提供一个 32.768kHz 频率的外部时钟源。可以通过设置在备份域控制寄存器（RCC_BDCR）里的 LSEBYP 和 LSEON 位来选择这个模式。具有 50% 占空比的外部时钟信号（方波、正弦波或三角波）必须连到 OSC32_IN 引脚，同时保证 OSC32_OUT 引脚悬空。</p>
<p>​     </p>
<h5 id="（4）低速内部时钟信号（LSI）"><a href="#（4）低速内部时钟信号（LSI）" class="headerlink" title="（4）低速内部时钟信号（LSI）"></a>（4）低速内部时钟信号（LSI）</h5><p>LSI RC 担当一个低功耗时钟源的角色，它可以在停机和待机模式下保持运行，为独立看门狗和自动唤醒单元提供时钟。LSI 时钟频率大约 40kHz（在 30kHz 到 60kHz 之间）。</p>
<p>LSI RC 可以通过控制/状态寄存器（RCC_CSR）里的 LSION 位来启动或关闭。</p>
<p>在控制/状态寄存器（RCC/CSR）里的 LSIRDY 位指示低速内部振荡器是否稳定。在启动阶段，知道这个位被硬件置 1 后，此时钟才被释放。如果在时钟中断寄存器（RCC_CIR）里被允许，将产生 LSI 中断申请。</p>
<p><strong>LSI 校准：（只有大容量和互联型产品可以进行 LSI 校准）</strong></p>
<p>可以通过校准内部低速振荡器 LSI 来补偿其频率便宜，从而获得精度可接受的 RTC 时间基数，以及独立看门狗 IWDG 的超时时间（当这些外设以 LSI 为时钟源）。</p>
<p>校准可以通过使用 TIM5 的输入时钟（TIM5_CLK）测量 LSI 时钟频率实现。测量以 HSE 的精度为保证，软件可以通过调整 RTC 的 20 位预分频器来获得精确的 RTC 时钟基数，以及通过计算得到精确的独立看门狗 IWDG 的超时时间。</p>
<p>LSI 校准步骤如下：</p>
<ul>
<li><p>打开 TIM5，设置通道 4 为输入捕获模式；</p>
</li>
<li><p>设置 AIFO_MAPR 的 TIM5_CH4_IREMAP 位为 1，在内部把 LSI 连接到 TIM5 的通道 4；</p>
</li>
<li><p>通过 TIM5 的捕获/比较 4 事件或者中断来测量 LSI 时钟频率；</p>
</li>
<li><p>根据测量结果和期望的 RTC 时间基数和独立看门狗的超时时间，设置 20 位预分频器。</p>
</li>
</ul>
<h5 id="（5）PLL"><a href="#（5）PLL" class="headerlink" title="（5）PLL"></a>（5）PLL</h5><p>内部 PLL 可以用来倍频 HSI RC 的输出时钟或 HSE 晶体输出时钟。PLL 的设置（选择 HSI 振荡器除以2或者 HSE 振荡器为 PLL 输入时钟，和选择倍频因子）必须在其被激活前完成。一旦 PLL 被激活，这些参数就不能被改动。</p>
<p>如果 PLL 中断在时钟中断寄存器里被允许，当 PLL 准备就绪时，可产生中断申请。</p>
<p>如果需要在应用中使用 USB 接口，PLL 必须被设置为输出 48 或 72MHz 时钟，用于提供 48MHz 的 USBCLK 时钟。</p>
<h4 id="2、系统时钟-SYSCLK"><a href="#2、系统时钟-SYSCLK" class="headerlink" title="2、系统时钟 SYSCLK"></a>2、系统时钟 SYSCLK</h4><p>STM32 的系统时钟 SYSCLK 由 SW 控制，从 HSI、PLLCLK 和 HSE 中三选一，通常选 PLLCLK。系统刚上电 的时候，使用系统内部 8MRC 时钟。SYSCLK 最大 72MHz，也可超频至 128MHz，但不建议。若使用 HSI 经 PLL 作为 SYSCLK，最大 64MHz，因为先 2 分频，PLL 最大只能 16 倍频。</p>
<p>系统复位后，HSI 振荡器被选为系统时钟。当时钟源被直接或通过 PLL 间接作为系统时钟时，它将不能被停止。</p>
<p>只有当目标时钟源准备就绪了，从一个时钟源到另一个时钟源的切换才会发生。在被选择时钟源没有就绪时，系统时钟的切换不会发生。直至目标时钟源就绪，才发生切换。</p>
<p>在时钟控制寄存器（RCC_CE）里的状态位指示哪个时钟已经准备好了，哪个时钟目前被用作系统时钟。</p>
<h3 id="二、时钟分配"><a href="#二、时钟分配" class="headerlink" title="二、时钟分配"></a>二、时钟分配</h3><h4 id="1、SYSCLK"><a href="#1、SYSCLK" class="headerlink" title="1、SYSCLK"></a>1、SYSCLK</h4><p>系统时钟 SYSCLK，它是供 STM32 中绝大部分部件工作的时钟源。系统时钟可选择为 PLL 输出、HSI 或者 HSE。系统时钟最大频率为 72MHz，它通过 AHB 分频器分频后送给各模块使用，AHB 分频器可选择 1、2、4、8、16、64、128、256、512 分频。其中 AHB 分频器输出的时钟送给 5 大模块使用：</p>
<ul>
<li><p>送给 AHB 总线、内核、内存和 DMA 使用的 HCLK 时钟。</p>
</li>
<li><p>通过 8 分频后送给 Cortex 的系统定时器时钟 SYSTICK。</p>
</li>
<li><p>直接送给 Cortex 的空闲运行时钟 FCLK。</p>
</li>
<li><p>送给 APB1 分频器。APB1 分频器可选择 1、2、4、8、16 分频，其输出一路供 APB1 外设使用(PCLK1，最大频率 36MHz)，另一路送给定时器 (Timer)2、3、4 倍频器使用。该倍频器可选择1 或者 2 倍频，时钟输出供定时器 2、3、4 使用。</p>
</li>
<li><p>送给 APB2 分频器。APB2 分频器可选择 1、2、4、8、16 分频，其输出一路供 APB2 外设使用(PCLK2，最大频率 72MHz)，另一路送给定时器 (Timer)1 倍频器使用。该倍频器可选择 1 或者 2 倍频，时钟输出供定时器 1 使用。另外，APB2 分频器还有一路输出供 ADC 分频器使用，分频后送给 ADC 模块使用。ADC 分频器可选择为 2、4、6、8 分频。</p>
</li>
</ul>
<p>在以上的时钟输出中，有很多是带使能控制的，例如 AHB 总线时钟、内核时钟、各种 APB1 外设、 APB2 外设等等。当需要使用某模块时，记得一定要先使能对应的时钟。</p>
<h4 id="2、具体时钟分配"><a href="#2、具体时钟分配" class="headerlink" title="2、具体时钟分配"></a>2、具体时钟分配</h4><p>CM3 的系统滴答时钟 SYSTICK，来源是 AHB 分频后再 8 分频，通常设置 AHB 不分频，所以 SYSTICK 的频率就是 SYSCLK/8。</p>
<p>APB1（低速APB）总线上的外设时钟 PCLK1，最大为 36MHz，所有挂载在 APB1 上的外设，最大时钟都是 36MHz，定时器除外。PCLK1 的时钟由 APB1 预分频器设置，默认 2 分频（72MHz/2）。挂在这一总线的外设有： 电源接口、备份接口、CAN、USB、I2C1、I2C2、UART2~5、SPI2、SPI3、窗口看门狗(WWDG)、Timer2~7。注意 USB 模块虽然需要一个单独的 48MHz 时钟信号，但它应该不是供 USB 模块工作的时钟，而只是提供给串行接口引擎(SIE)使用的时钟。</p>
<p>APB2（高速 APB）总线上的外设时钟 PCLK2，最大为 72MHz，所有挂载在 APB2 上的外设，最大时钟都是 72MHz。PCLK2 的时钟由 APB2 预分频器设置，默认不分频。挂在这一总线的外设有：UART1、GPIOA~G、SPI1、ADC1~3、高级定时器（1、8）第二功能 IO 口。</p>
<p>SDIO 接口的时钟频率固定为 HCLK/2。</p>
<p>ADC 时钟由高速 APB2 时钟经 2、4、6 或 8 分频获得。</p>
<p>如果相应的 APB 预分频系数是 1，定时器时钟频率与所在 APB 总线频率一致，否则为与其相连的 APB 总线频率的 2 倍</p>
<p>​     </p>
<p>FCLK 是 CM3 的自由运行时钟。</p>
<p>STM32 中有一个全速功能的 USB 模块，其串行接口引擎需要一个频率为 48MHz 的时钟源。该时钟源只能从 PLL 输出端获取，可以选择为 1.5 分频或者 1 分频，也就是，当需要使用 USB 模块时，PLL 必须使能，并且时钟频率配置为 48MHz 或 72MHz。</p>
<h4 id="3、时钟安全系统（CSS）"><a href="#3、时钟安全系统（CSS）" class="headerlink" title="3、时钟安全系统（CSS）"></a>3、时钟安全系统（CSS）</h4><p>时钟安全系统可以通过软件激活。一旦其被激活，时钟监测器将在 HSE 振荡器启动延迟后被使能，并在 HSE 时钟关闭后关闭。</p>
<p>如果 HSE 时钟发生故障，HSE 振荡器被自动关闭，时钟失效事件将被送到高级定时器（TIM1 和 TIM8）的刹车输入端，并产生时钟安全中断 CSSI，允许软件完成营救操作。此 CSSI 中断连接到 Cortex-M3 的 NMI 中断。</p>
<p>一旦 CSS 被激活，并且 HSE 时钟出现故障，CSS 中断就产生，并且 NMI 也自动产生。NMI 将被不断执行，知道 CSS 中断挂起位被清除。因此，在NMI的处理程序中必须通过设置时钟中断寄存器（RCC_CIR）里的 CSSC 位来清除 CSS 中断。</p>
<p>如果 HSE 振荡器被直接或间接地作为系统时钟，（间接是指作为 PLL 输入时钟而 PLL 时钟作为系统时钟），时钟故障将导致系统时钟自动切换到 HSI 振荡器，同时外部 HSE 振荡器被关闭。在时钟失效时，如果 HSE 振荡器时钟（被分频或未被分频）是用作系统时钟的 PLL 的输入时钟，PLL 也将被关闭。</p>
<h4 id="4、RTC-时钟"><a href="#4、RTC-时钟" class="headerlink" title="4、RTC 时钟"></a>4、RTC 时钟</h4><p>通过设置备份域控制寄存器（RCC_BDCR）里的 RTCSEL[1:0] 位，RTCCLK 时钟源可以有 HSE/128、LSE 或 LSI 时钟提供。除非备份域复位，此选择不能被改变。</p>
<p>LSE 时钟在备份域里，但 HSE 和 LSI 时钟不是。因此：</p>
<ul>
<li><p>如果 LSE 被选为 RTC 时钟：</p>
<ul>
<li>只要 VBAT 维持供电，尽管 VDD 供电被切断，RTC 仍继续工作。</li>
</ul>
</li>
<li><p>如果 LSI 被选为自动唤醒单元（AWU）时钟：</p>
<ul>
<li>如果 VDD 供电被切断，AWU 状态不能被保证。</li>
</ul>
</li>
<li><p>如果 HSE 时钟 128 分频后作为 RTC 时钟：</p>
<ul>
<li>如果 VDD 供电被切断或内部电压调压器被关闭（1.8V 域的供电被切断），则 RTC 状态不确定。</li>
<li>必须设置电源控制寄存器的 DPB 位为 1（取消后备区域的写保护）。</li>
</ul>
</li>
</ul>
<h4 id="5、看门狗时钟"><a href="#5、看门狗时钟" class="headerlink" title="5、看门狗时钟"></a>5、看门狗时钟</h4><p>如果独立看门狗已经由硬件选项或软件启动，LSI 振荡器将被强制在打开状态，并且不能被关闭。在 LSI 振荡器稳定后，时钟供应给 IWDG。</p>
<hr>
<h3 id="三、时钟输出"><a href="#三、时钟输出" class="headerlink" title="三、时钟输出"></a>三、时钟输出</h3><p>STM32 可以选择一个时钟信号输出到 MCO 脚(PA8)上，可以选择为 PLL 输出的 2 分频、HSI、HSE、或者 SYSCLK。</p>
<hr>
<h3 id="四、相关寄存器"><a href="#四、相关寄存器" class="headerlink" title="四、相关寄存器"></a>四、相关寄存器</h3><p>（1）时钟控制寄存器（RCC_CR）初始化用</p>
<p>（2）时钟配置寄存器（RCC_CFGR）初始化用</p>
<p>（3）时钟中断寄存器（RCC_CIR）</p>
<p>（4）APB2 外设复位寄存器（RCC_APB2RSTR）</p>
<p>（5）APB1 外设复位寄存器（RCC_APB1RSTR）</p>
<p>（6）AHB 外设时钟使能寄存器（RCC_AHBENR）</p>
<p>（7）APB2 外设时钟使能寄存器（RCC_APB2ENR）</p>
<p>（8）APB1 外设时钟使能寄存器（RCC_APB1ENR）</p>
<p>（9）备份域控制寄存器（RCC_BDCR）</p>
<p>（10）控制/状态寄存器（RCC_CSR）</p>
<p>（11）RCC 寄存器地址映像</p>
<p>RCC 地址：0x4002 1000-0x4002 13ff</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/硬件拾忆/" rel="tag"># 硬件拾忆</a>
          
            <a href="/tags/STM32/" rel="tag"># STM32</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blog/2019/03/04/STM32-程序烧录/" rel="next" title="STM32 程序烧录">
                <i class="fa fa-chevron-left"></i> STM32 程序烧录
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blog/2019/03/04/STM32-F-S-MC-总线/" rel="prev" title="STM32 F(S)MC 总线">
                STM32 F(S)MC 总线 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Isaac</p>
              <p class="site-description motion-element" itemprop="description">学习笔记 思考感悟</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">59</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#一、时钟源"><span class="nav-number">1.</span> <span class="nav-text">一、时钟源</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、物理时钟源"><span class="nav-number">1.1.</span> <span class="nav-text">1、物理时钟源</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#（1）高速外部时钟信号（HSE）"><span class="nav-number">1.1.1.</span> <span class="nav-text">（1）高速外部时钟信号（HSE）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#（2）高速内部时钟信号（HSI）"><span class="nav-number">1.1.2.</span> <span class="nav-text">（2）高速内部时钟信号（HSI）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#（3）低速外部时钟信号（LSE）"><span class="nav-number">1.1.3.</span> <span class="nav-text">（3）低速外部时钟信号（LSE）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#（4）低速内部时钟信号（LSI）"><span class="nav-number">1.1.4.</span> <span class="nav-text">（4）低速内部时钟信号（LSI）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#（5）PLL"><span class="nav-number">1.1.5.</span> <span class="nav-text">（5）PLL</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、系统时钟-SYSCLK"><span class="nav-number">1.2.</span> <span class="nav-text">2、系统时钟 SYSCLK</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二、时钟分配"><span class="nav-number">2.</span> <span class="nav-text">二、时钟分配</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、SYSCLK"><span class="nav-number">2.1.</span> <span class="nav-text">1、SYSCLK</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、具体时钟分配"><span class="nav-number">2.2.</span> <span class="nav-text">2、具体时钟分配</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、时钟安全系统（CSS）"><span class="nav-number">2.3.</span> <span class="nav-text">3、时钟安全系统（CSS）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4、RTC-时钟"><span class="nav-number">2.4.</span> <span class="nav-text">4、RTC 时钟</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5、看门狗时钟"><span class="nav-number">2.5.</span> <span class="nav-text">5、看门狗时钟</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三、时钟输出"><span class="nav-number">3.</span> <span class="nav-text">三、时钟输出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#四、相关寄存器"><span class="nav-number">4.</span> <span class="nav-text">四、相关寄存器</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Isaac</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
